{% seo %}

{% include json-ld.html %}

{% if jekyll.environment == 'production' and site.google_analytics %}
  {% include analytics.html %}
{% endif %}

<script data-goatcounter="https://codewithshabib.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            securityLevel: 'loose',
            htmlLabels: true
        });

        // Force render any mermaid diagrams
        setTimeout(() => {
            document.querySelectorAll('.language-mermaid').forEach((el) => {
                // Create wrapper div with mermaid class
                const wrapper = document.createElement('div');
                wrapper.className = 'mermaid';
                wrapper.textContent = el.textContent;
                
                // Replace pre element with wrapper
                el.parentNode.replaceWith(wrapper);
                
                // Initialize mermaid on this element
                mermaid.init(undefined, wrapper);
            });
        }, 1000);
    });
</script>

<meta property="og:title" content="{{ page.title }}">
<meta property="og:description" content="{{ page.description }}">
<meta property="og:type" content="{% if page.layout == 'single' %}article{% else %}website{% endif %}">
<meta property="og:url" content="{{ site.url }}{{ page.url }}">
<meta property="og:image" content="{{ site.url }}{{ page.image | default: site.author.avatar }}">
<meta property="og:site_name" content="{{ site.title }}">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page.title }}">
<meta name="twitter:description" content="{{ page.description }}">
<meta name="twitter:image" content="{{ site.url }}{{ page.image | default: site.author.avatar }}">
